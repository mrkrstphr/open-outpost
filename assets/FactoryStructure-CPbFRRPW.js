import{j as e,d,e as h,s as o,C as x,B as m,g as j,r as p,p as g,P as f,h as n,i as y,k as b,l as v}from"./index-BZAYrGyZ.js";import{u as N}from"./useOre-DJz7t0TE.js";import{u as C}from"./types-BYagSVKs.js";const B=({structure:s})=>{var c;const t=d(),a=h(),l=o[s.type];return e.jsxs(x,{title:"Structure Kit Storage",classNames:{body:"pb-0"},children:[e.jsx("p",{className:"text-sm mb-1",children:"The following structure kits are in storage. Select a kit to build it in the colony."}),e.jsx("div",{className:"flex flex-wrap",children:Array.from({length:((c=l.produces)==null?void 0:c.slots)??0}).map((i,r)=>{var u;return e.jsx(m,{className:"bg-gray-900 border border-purple-500 mr-1 mb-1",children:(u=s.storage)!=null&&u[r]?e.jsx("img",{src:o[s.storage[r]].image,className:"h-16 w-16 cursor-pointer object-contain",onClick:()=>{t(j({factory:s,index:r})),a("/")}}):e.jsx("div",{className:"text-2xl opacity-30 font-bold select-none h-16 w-16 flex items-center justify-center",children:e.jsx("span",{children:"X"})})},`slot-${r}`)})})]})},k=({structure:s})=>{var i,r;const t=d(),a=s.current?o[s.current.type]:void 0,[l,c]=p.useState(!1);return a?e.jsx(x,{title:"Current Production",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(m,{className:"bg-gray-900 self-start",children:e.jsx("img",{src:a.image,alt:a.type,className:"h-16 w-16 object-contain"})}),e.jsxs("div",{className:"flex flex-col space-y-1 flex-1",children:[e.jsx("div",{className:"mb-1",children:a.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(f,{className:"flex-1",percent:Math.min(100,(((i=s.current)==null?void 0:i.progress)??0)/a.kitBuildTime*100)}),e.jsxs("div",{className:"w-22 text-right",children:[((r=s.current)==null?void 0:r.progress)??0,"/",a.kitBuildTime]})]}),e.jsxs("div",{children:[!l&&e.jsx(n,{onClick:()=>c(!0),children:"Cancel Construction"}),l&&e.jsxs("div",{className:"flex flex-col space-y-1 items-center",children:[e.jsx("div",{children:"Are you sure you want to cancel construction?"}),e.jsxs("div",{className:"flex space-x-1 mt-1",children:[e.jsx(n,{variant:"danger",onClick:()=>{t(y({factory:s})),c(!1)},children:"Confirm"}),e.jsx(n,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"})]})]})]})]})]})}):null},S=({selected:s,structure:t,onBuild:a,onSelect:l})=>{const c=N(),i=b(c,t);return e.jsxs(m,{className:v("flex space-x-1 relative",i&&"hover:cursor-pointer hover:bg-purple-400",s&&"bg-purple-500"),onClick:()=>i&&(l==null?void 0:l(t)),children:[!i&&e.jsx("div",{className:"absolute left-0 w-full h-full top-0 bg-black opacity-50"}),e.jsx(m,{className:"bg-gray-900",children:e.jsx("img",{src:t.image,alt:t.type,className:"h-16 w-16 object-contain"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-1",children:t.name}),e.jsxs("div",{className:"text-sm",children:["Common: ",t.buildCost.common," | Rare: ",t.buildCost.rare]}),e.jsxs("div",{className:"text-sm",children:["Build Time:"," ",Intl.NumberFormat(navigator.language,{minimumFractionDigits:0,maximumFractionDigits:2}).format(t.kitBuildTime/100)," ","mark"]})]}),s&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(n,{onClick:a,children:"Build"})})]})},w=({structure:s})=>{const t=d(),[a,l]=p.useState();return e.jsxs(x,{title:"Build Menu",children:[e.jsx("p",{className:"text-sm mb-1",children:"Select a structure kit to start manufacturing it. Once the kit is complete, the building may be constructed in the colony."}),e.jsx("div",{className:"flex flex-col space-y-1",children:Object.values(o).map(c=>e.jsx(S,{structure:c,selected:(a==null?void 0:a.type)===c.type,onBuild:()=>{t(g({factory:s,type:c.type}))},onSelect:()=>l(c)},`build-${c.type}`))})]})},F=()=>{var a;const{structure:s}=C(),t=!!((a=s.current)!=null&&a.type);return e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(B,{structure:s}),!t&&e.jsx(w,{structure:s}),t&&e.jsx(k,{structure:s})]})};export{F as default};
