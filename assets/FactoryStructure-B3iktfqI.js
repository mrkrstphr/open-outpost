import{c as p,j as e,d as m,e as j,s as o,C as x,B as d,g,r as h,p as f,P as y,h as n,i as v,k as b,l as N}from"./index-DYQgUpNh.js";import{u as C}from"./useOre-Bi7pYTU8.js";const B=()=>p(),k=({structure:s})=>{var c;const t=m(),a=j(),l=o[s.type];return e.jsxs(x,{title:"Structure Kit Storage",children:[e.jsx("p",{className:"text-sm mb-1",children:"The following structure kits are in storage. Select a kit to build it in the colony."}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:((c=l.produces)==null?void 0:c.slots)??0}).map((i,r)=>{var u;return e.jsx(d,{className:"bg-gray-900 border border-purple-500",children:(u=s.storage)!=null&&u[r]?e.jsx("img",{src:o[s.storage[r]].image,className:"h-16 w-16 cursor-pointer object-contain",onClick:()=>{t(g({factory:s,index:r})),a("/")}}):e.jsx("div",{className:"text-2xl opacity-30 font-bold select-none h-16 w-16 flex items-center justify-center",children:e.jsx("span",{children:"X"})})},`slot-${r}`)})})]})},S=({structure:s})=>{var i,r;const t=m(),a=s.current?o[s.current.type]:void 0,[l,c]=h.useState(!1);return a?e.jsx(x,{title:"Current Production",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(d,{className:"bg-gray-900",children:e.jsx("img",{src:a.image,alt:a.type,className:"h-16 w-16 object-contain"})}),e.jsxs("div",{className:"flex flex-col space-y-1 flex-1",children:[e.jsx("div",{className:"mb-1",children:a.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{className:"flex-1",percent:Math.min(100,(((i=s.current)==null?void 0:i.progress)??0)/a.kitBuildTime*100)}),e.jsxs("div",{className:"w-22 text-right",children:[((r=s.current)==null?void 0:r.progress)??0,"/",a.kitBuildTime]})]}),e.jsxs("div",{children:[!l&&e.jsx(n,{onClick:()=>c(!0),children:"Cancel Construction"}),l&&e.jsxs("div",{className:"flex space-x-1 items-center",children:[e.jsx("div",{children:"Are you sure you want to cancel construction?"}),e.jsx(n,{variant:"danger",onClick:()=>{t(v({factory:s})),c(!1)},children:"Confirm"}),e.jsx(n,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"})]})]})]})]})}):null},w=({selected:s,structure:t,onBuild:a,onSelect:l})=>{const c=C(),i=b(c,t);return e.jsxs(d,{className:N("flex space-x-1 relative",i&&"hover:cursor-pointer hover:bg-purple-400",s&&"bg-purple-500"),onClick:()=>i&&(l==null?void 0:l(t)),children:[!i&&e.jsx("div",{className:"absolute left-0 w-full h-full top-0 bg-black opacity-50"}),e.jsx(d,{className:"bg-gray-900",children:e.jsx("img",{src:t.image,alt:t.type,className:"h-16 w-16 object-contain"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-1",children:t.name}),e.jsxs("div",{className:"text-sm",children:["Common: ",t.buildCost.common," | Rare: ",t.buildCost.rare]}),e.jsxs("div",{className:"text-sm",children:["Build Time:"," ",Intl.NumberFormat(navigator.language,{minimumFractionDigits:0,maximumFractionDigits:2}).format(t.kitBuildTime/100)," ","mark"]})]}),s&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(n,{onClick:a,children:"Build"})})]})},P=({structure:s})=>{const t=m(),[a,l]=h.useState();return e.jsxs(x,{title:"Build Menu",children:[e.jsx("p",{className:"text-sm mb-1",children:"Select a structure kit to start manufacturing it. Once the kit is complete, the building may be constructed in the colony."}),e.jsx("div",{className:"flex flex-col space-y-1",children:Object.values(o).map(c=>e.jsx(w,{structure:c,selected:(a==null?void 0:a.type)===c.type,onBuild:()=>{t(f({factory:s,type:c.type}))},onSelect:()=>l(c)},`build-${c.type}`))})]})},F=()=>{var a;const{structure:s}=B(),t=!!((a=s.current)!=null&&a.type);return e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(k,{structure:s}),!t&&e.jsx(P,{structure:s}),t&&e.jsx(S,{structure:s})]})};export{F as default};
